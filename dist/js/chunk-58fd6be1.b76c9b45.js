(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58fd6be1","chunk-2d0deb32","chunk-2d230817"],{"0fdd":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("d2-container",{class:{"page-compact":t.crud.pageOptions.compact}},[i("template",{slot:"header"},[t._v("发票")]),i("d2-crud-x",t._g(t._b({ref:"d2Crud",on:{passApplyFor:t.passApplyFor,rejectApplyFor:t.rejectApplyFor}},"d2-crud-x",t._crudProps,!1),t._crudListeners),[i("div",{attrs:{slot:"header"},slot:"header"},[i("crud-search",{ref:"search",attrs:{options:t.crud.searchOptions},on:{submit:t.handleSearch}}),i("el-button-group",[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"credit.invoice/add",expression:"'credit.invoice/add'"}],attrs:{size:"small",type:"primary"},on:{click:t.addRow}},[i("i",{staticClass:"el-icon-plus"}),t._v(" 新增")])],1),i("crud-toolbar",{attrs:{search:t.crud.searchOptions.show,compact:t.crud.pageOptions.compact,columns:t.crud.columns},on:{"update:search":function(e){return t.$set(t.crud.searchOptions,"show",e)},"update:compact":function(e){return t.$set(t.crud.pageOptions,"compact",e)},refresh:function(e){return t.doRefresh()},"columns-filter-changed":t.handleColumnsFilterChanged}})],1)]),i("el-dialog",{attrs:{title:"通过",visible:t.dialogApplyFor},on:{"update:visible":function(e){t.dialogApplyFor=e}}},[i("p",{staticClass:"info"},[t._v("确认通过吗？")]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("取消 ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.passApply}},[t._v("确定 ")])],1)]),i("el-dialog",{attrs:{title:"驳回",visible:t.dialogRejectApplyFor},on:{"update:visible":function(e){t.dialogRejectApplyFor=e}}},[i("p",{staticClass:"info"},[t._v("确认驳回吗？")]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("取消 ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.rejectApply}},[t._v("确定 ")])],1)])],2)},o=[],n=i("8785"),a=i("ed24"),s=i("1fbf"),c=i("22ce"),l={name:"formSelect",mixins:[s["d2CrudPlus"].crud],data:function(){return{dialogApplyFor:!1,dialogRejectApplyFor:!1,id:null}},methods:{getCrudOptions:function(){return Object(a["crudOptions"])(this)},pageRequest:function(t){return n["GetList"](t)},addRequest:function(t){return console.log("api",n),n["AddObj"](t)},updateRequest:function(t){return console.log("----",t),n["UpdateObj"](t)},delRequest:function(t){return n["DelObj"](t.id)},passApplyFor:function(t,e){t.index;var i=t.row;this.id=i.id,this.dialogApplyFor=!0},passApply:function(t){var e=this;return Object(c["b"])({url:"credit.invoice/adopt",method:"post",data:{id:this.id}}).then((function(t){e.dialogApplyFor=!1,e.$message({message:t.msg,type:"success"}),e.doRefresh()}))},close:function(){this.dialogApplyFor=!1,this.dialogRejectApplyFor=!1},rejectApplyFor:function(t,e){t.index;var i=t.row;this.id=i.id,this.dialogRejectApplyFor=!0},rejectApply:function(){var t=this;return Object(c["b"])({url:"credit.invoice/reject",method:"post",data:{id:this.id}}).then((function(e){t.dialogRejectApplyFor=!1,t.$message({message:e.msg,type:"success"}),t.doRefresh()}))}}},d=l,u=(i("c469"),i("2877")),p=Object(u["a"])(d,r,o,!1,null,"07e66334",null);e["default"]=p.exports},8785:function(t,e,i){"use strict";i.r(e),i.d(e,"GetList",(function(){return o})),i.d(e,"AddObj",(function(){return n})),i.d(e,"UpdateObj",(function(){return a})),i.d(e,"DelObj",(function(){return s})),i.d(e,"GetCascadeData",(function(){return c}));var r=i("22ce");function o(t){return Object(r["b"])({url:"credit.invoice/index",method:"post",data:{page:t.current,limit:t.size}}).then((function(e){return console.log(e,9999,e.data),e.data=e.data?e.data:{},e.data.current=t.current,e.data.size=t.size,e.data.total=e.count,e.data.records=e.data,e}))}function n(t){return Object(r["b"])({url:"credit.invoice/add",method:"post",data:t})}function a(t){return Object(r["b"])({url:"credit.invoice/edit",method:"post",data:t})}function s(t){return Object(r["b"])({url:"credit.invoice/delete",method:"post",data:{id:t}})}function c(){return Object(r["b"])({url:"/select/cascadeData",method:"get"})}},c469:function(t,e,i){"use strict";var r=i("d83f"),o=i.n(r);o.a},d83f:function(t,e,i){},ed24:function(t,e,i){"use strict";i.r(e),i.d(e,"crudOptions",(function(){return o}));var r=i("22ce"),o=function(t){return{rowHandle:{fixed:"right",width:400,edit:{thin:!0,text:null,disabled:function(){return!t.hasPermissions("credit.invoice/edit")}},remove:{thin:!0,text:null,disabled:function(){return!t.hasPermissions("credit.invoice/delete")}},custom:[{text:"通过",type:"success",size:"small",emit:"passApplyFor",disabled:function(){return!t.hasPermissions("credit.invoice/adopt")}},{text:"驳回",type:"danger",size:"small",emit:"rejectApplyFor",disabled:function(){return!t.hasPermissions("credit.invoice/reject")}}]},pageOptions:{compact:!1},options:{height:"100%"},viewOptions:{componentType:"row"},formOptions:{defaultSpan:12},columns:[{title:"发票类型",key:"invoice_type",sortable:!0,type:"select",width:120,dict:{data:[{value:1,label:"增值税专用发票"},{value:2,label:"增值税普通发票"},{value:3,label:"普通发票"}]},form:{rules:[{required:!0,message:"请选择发票类型"}]}},{title:"销售合同编号",key:"contract_code",width:100,search:{show:!0},type:"select",dict:{url:"/dicts/getSaleList",getData:function(t,e){return Object(r["b"])({url:"contract.sale/getSaleList",method:"post"}).then((function(t){for(var e=t.data,i=[{value:null,label:"请选择"}],r=0;r<e.length;r++)i.push({value:e[r].contract_code,label:e[r].contract_code});return i}))}},form:{rules:[{required:!0,message:"请选择销售合同编号"}]}},{title:"申请人",key:"admin_id",width:100,search:{show:!0},type:"select",dict:{url:"/dicts/getAdminList",getData:function(t,e){return Object(r["b"])({url:"system.admin/getAdminList",method:"post"}).then((function(t){for(var e=t.data,i=[{value:null,label:"请选择"}],r=0;r<e.length;r++)i.push({value:e[r].id,label:e[r].realname});return i}))}},form:{rules:[{required:!0,message:"请选择申请人"}],component:{value:null}}},{title:"发票内容",key:"invoice_content",type:"text"},{title:"发票金额",key:"invoice_price",type:"text"},{title:"状态",key:"status",type:"select",dict:{data:[{value:1,label:"申请中"},{value:2,label:"已通过"},{value:3,label:"已驳回"}]}},{title:"申请时间",key:"add_date",type:"datetime",width:150,form:{disabled:!0}},{title:"处理时间",key:"handle_date",type:"datetime",width:150,form:{disabled:!0}}]}}}}]);