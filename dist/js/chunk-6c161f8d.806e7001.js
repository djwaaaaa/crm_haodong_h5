(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c161f8d","chunk-2d0c7cd4","chunk-2d21e1f5"],{"51bd":function(e,t,r){"use strict";r.r(t),r.d(t,"GetList",(function(){return a})),r.d(t,"GetTree",(function(){return i})),r.d(t,"AddObj",(function(){return c})),r.d(t,"UpdateObj",(function(){return o})),r.d(t,"DelObj",(function(){return s})),r.d(t,"GetObj",(function(){return d}));var n=r("22ce"),u="/permission/manager/resource";function a(e){return Object(n["b"])({url:"system.menu/index",method:"get",params:e}).then((function(e){var t=e.data;for(var r in t)delete t[r].create_time,delete t[r].update_time,delete t[r].delete_time;return e.data=t,e}))}function i(e){return Object(n["b"])({url:"system.menu/index",method:"get",params:e}).then((function(e){for(var t=[],r=[],n=0;n<e.data.length;n++)delete e.data[n].create_time,delete e.data[n].update_time,delete e.data[n].delete_time,0==e.data[n].pid?(e.data[n].children=[],t.push(e.data[n])):r.push(e.data[n]);for(var u=0;u<r.length;u++)for(var a=0;a<t.length;a++)r[u].pid==t[a].id&&t[a].children.push(r[u]);return e.data=t,e}))}function c(e){return Object(n["b"])({url:"system.menu/add",method:"post",data:e})}function o(e){return Object(n["b"])({url:"system.menu/edit",method:"post",data:e})}function s(e){return Object(n["b"])({url:"system.menu/delete",method:"post",params:{id:e}})}function d(e){return Object(n["b"])({url:u+"/info",method:"get",params:{id:e}})}},"965c":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",{class:{"page-compact":e.crud.pageOptions.compact}},[r("template",{slot:"header"},[e._v("资源管理")]),r("d2-crud-x",e._g(e._b({ref:"d2Crud",on:{"add-sub-resource":e.handleAddSubResource}},"d2-crud-x",e._crudProps,!1),e._crudListeners),[r("div",{attrs:{slot:"header"},slot:"header"},[r("crud-search",{ref:"search",attrs:{options:e.crud.searchOptions},on:{submit:e.handleSearch}}),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system.menu/add",expression:"'system.menu/add'"}],attrs:{slot:"header",size:"small",type:"primary"},on:{click:e.addRootRow},slot:"header"},[r("i",{staticClass:"el-icon-plus"}),e._v(" 新增")]),r("crud-toolbar",{attrs:{search:e.crud.searchOptions.show,compact:e.crud.pageOptions.compact,columns:e.crud.columns},on:{"update:search":function(t){return e.$set(e.crud.searchOptions,"show",t)},"update:compact":function(t){return e.$set(e.crud.pageOptions,"compact",t)},refresh:function(t){return e.doRefresh()},"columns-filter-changed":e.handleColumnsFilterChanged}})],1)])],2)},u=[],a=(r("96cf"),r("1da1")),i=r("d3e5"),c=r("1fbf"),o=r("51bd"),s=r("aa6f"),d=r.n(s),l={name:"Resource",mixins:[c["d2CrudPlus"].crud],data:function(){return{}},methods:{getCrudOptions:function(){return Object(i["crudOptions"])(this)},pageRequest:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["GetTree"])(e);case 2:return n=r.sent,console.log(n,77777),u=n.data,n.data={current:1,size:1e4,total:100,records:u},t.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:return r=t.getD2Crud().$refs.elTable.store.states.treeData,null!=r&&d()(r,(function(e,t){e.children&&e.level<=1&&(e.expanded=!0)})),e.next=6,t.$nextTick();case 6:t.getD2CrudTable().doLayout();case 7:case"end":return e.stop()}}),e)})))),r.abrupt("return",n);case 8:case"end":return r.stop()}}),r)})))()},clearResourceTreeDictCache:function(){},addRequest:function(e){return this.clearResourceTreeDictCache(),Object(o["AddObj"])(e)},updateRequest:function(e){return this.clearResourceTreeDictCache(),Object(o["UpdateObj"])(e)},delRequest:function(e){return this.clearResourceTreeDictCache(),Object(o["DelObj"])(e.id)},infoRequest:function(e){return Object(o["GetObj"])(e.id)},handleAddSubResource:function(e){e.index;var t=e.row;this.addRow({parentId:t.id})},addRootRow:function(){this.addRow({parentId:0})}}},f=l,h=r("2877"),p=Object(h["a"])(f,n,u,!1,null,null,null);t["default"]=p.exports},aa6f:function(e,t){var r=9007199254740991,n="[object Arguments]",u="[object Function]",a="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/;function c(e,t){var r=-1,n=e?e.length:0;while(++r<n)if(!1===t(e[r],r,e))break;return e}function o(e,t){var r=-1,n=Array(e);while(++r<e)n[r]=t(r);return n}function s(e,t){return function(r){return e(t(r))}}var d=Object.prototype,l=d.hasOwnProperty,f=d.toString,h=d.propertyIsEnumerable,p=s(Object.keys,Object);function m(e,t){var r=_(e)||k(e)?o(e.length,String):[],n=r.length,u=!!n;for(var a in e)!t&&!l.call(e,a)||u&&("length"==a||j(a,n))||r.push(a);return r}var b=O(g),v=w();function g(e,t){return e&&v(e,t,$)}function y(e){if(!x(e))return p(e);var t=[];for(var r in Object(e))l.call(e,r)&&"constructor"!=r&&t.push(r);return t}function O(e,t){return function(r,n){if(null==r)return r;if(!C(r))return e(r,n);var u=r.length,a=t?u:-1,i=Object(r);while(t?a--:++a<u)if(!1===n(i[a],a,i))break;return r}}function w(e){return function(t,r,n){var u=-1,a=Object(t),i=n(t),c=i.length;while(c--){var o=i[e?c:++u];if(!1===r(a[o],o,a))break}return t}}function j(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}function x(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||d;return e===r}function R(e,t){var r=_(e)?c:b;return r(e,"function"==typeof t?t:G)}function k(e){return T(e)&&l.call(e,"callee")&&(!h.call(e,"callee")||f.call(e)==n)}var _=Array.isArray;function C(e){return null!=e&&A(e.length)&&!D(e)}function T(e){return P(e)&&C(e)}function D(e){var t=q(e)?f.call(e):"";return t==u||t==a}function A(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function q(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function P(e){return!!e&&"object"==typeof e}function $(e){return C(e)?m(e):y(e)}function G(e){return e}e.exports=R},d3e5:function(e,t,r){"use strict";r.r(t),r.d(t,"crudOptions",(function(){return u}));var n=r("22ce"),u=function(e){return{pagination:!1,searchOptions:{show:!1},rowHandle:{view:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("system.menu/add")}},edit:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("system.menu/edit")}},remove:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("system.menu/delete")}},custom:[{thin:!0,text:null,type:"primary",size:"small",emit:"add-sub-resource",icon:"el-icon-plus",disabled:function(){return!e.hasPermissions("system.menu/add")}}],width:180,fixed:"right"},options:{highlightCurrentRow:!0,rowKey:"id"},columns:[{title:"资源名称",key:"title",form:{rules:[{required:!0,message:"请输入资源名称"}],component:{props:{placeholder:"菜单名称"}}},width:200},{title:"图标",key:"icon",sortable:!1,type:"icon-selector",width:60,form:{rules:[{required:!0,message:"请选择图标"}]}},{title:"菜单链接",key:"href",sortable:!0,width:170},{title:"排序",key:"sort",sortable:!0},{title:"状态",key:"status",type:"dict-switch",dict:{data:[{value:1,label:"开启"},{value:0,label:"关闭"}]},form:{component:{value:1,show:function(e){return!0}}}},{title:"id",key:"id",form:{disabled:!0},sortable:!0},{title:"上级菜单",key:"pid",sortable:!0,width:100,type:"tree-selector",dict:{url:"system.menu/index",isTree:!0,value:"id",label:"title",getData:function(e,t){return Object(n["b"])({url:e}).then((function(e){for(var t=[],r=[],n=0;n<e.data.length;n++)delete e.data[n].create_time,delete e.data[n].update_time,delete e.data[n].delete_time,0==e.data[n].pid?(e.data[n].children=[],t.push(e.data[n])):r.push(e.data[n]);for(var u=0;u<r.length;u++)for(var a=0;a<t.length;a++)r[u].pid==t[a].id&&t[a].children.push(r[u]);return e.data=t,[{id:0,title:"根节点",children:e.data}]}))}},form:{rules:[{required:!0,message:"请选择上级菜单"}],component:{props:{multiple:!1,elProps:{defaultExpandAll:!0},dict:{cache:!1}}}}}]}}}}]);