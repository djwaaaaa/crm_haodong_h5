(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2c6f274","chunk-c4915da4","chunk-2d216f05","chunk-2d225069","chunk-2d20f8f4","chunk-2d210696"],{"083c":function(t,e,a){},"0d82":function(t,e,a){},"56ca":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.checkDialog?a("div",{staticClass:"productdetailBox"},[a("div",{staticClass:"productDetail"},[a("div",{staticClass:"dialog-header"},[a("div",{staticClass:"tabs"},[a("div",{staticClass:"btn",class:{check:t.choose},on:{click:t.chooseInfo}},[t._v("基本信息对比")]),a("div",{staticClass:"btn ",class:{check:!t.choose},on:{click:t.chooseInfo}},[t._v("产品数据对比")])]),a("div",{staticClass:"close"},[a("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:t.close}},[a("i",{staticClass:"el-dialog__close el-icon el-icon-close"})])])]),a("div",{staticClass:"dialog-content"},[t.choose?a("div",{staticClass:"itemDetail"},[t._l(t.contractArr,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"header"},[t.contractArr.length<2?a("div",{staticClass:"name"},[t._v("销售合同基本信息")]):t._e(),r?a("div",{staticClass:"name"},[t._v("销售合同(增补合同)基本信息")]):t._e(),a("div",{staticClass:"code"},[t._v("项目编号："),a("span",[t._v(t._s(t.project_code))])])]),a("div",{staticClass:"details"},[a("ul",t._l(e,(function(e,r){return a("li",{key:r,class:{all:"合同说明"==t.contract[r]}},[a("p",{staticClass:"first"},[t._v(t._s(t.contract[r])+":")]),a("p",[t._v(t._s(e))])])})),0)])])})),t._l(t.orderArr,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"header"},[t.orderArr.length<2?a("div",{staticClass:"name"},[t._v("生产订单基本信息")]):t._e(),t.orderArr.length>=2?a("div",{staticClass:"name"},[t._v("生产订单"+t._s(r+1)+"基本信息")]):t._e(),a("div",{staticClass:"code"},[t._v("项目编号："),a("span",[t._v(t._s(t.project_code))])])]),a("div",{staticClass:"details"},[a("ul",t._l(e,(function(e,r){return a("li",{key:r},[a("p",{staticClass:"first"},[t._v(t._s(t.order[r])+":")]),a("p",[t._v(t._s(e))])])})),0)])])})),t._l(t.purchaseArr,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"header"},[t.purchaseArr.length<2?a("div",{staticClass:"name"},[t._v("采购合同基本信息")]):t._e(),t.purchaseArr.length>=2?a("div",{staticClass:"name"},[t._v("采购合同"+t._s(r+1)+"基本信息")]):t._e(),a("div",{staticClass:"code"},[t._v("项目编号："),a("span",[t._v(t._s(t.project_code))])])]),a("div",{staticClass:"details"},[a("ul",t._l(e,(function(e,r){return a("li",{key:r,class:{all:"合同说明"==t.purchase[r]}},[a("p",{staticClass:"first"},[t._v(t._s(t.purchase[r])+":")]),a("p",[t._v(t._s(e))])])})),0)])])}))],2):t._e(),t.choose?t._e():a("div",{staticClass:"itemDetail"},[t._l(t.contractDetailArr,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"header"},[r?t._e():a("div",{staticClass:"name"},[t._v("销售合同产品信息")]),r?a("div",{staticClass:"name"},[t._v("销售合同(增补合同)产品信息")]):t._e()]),a("div",{staticClass:"details"},[a("table",{attrs:{border:"1",width:"100%"}},[a("tbody",[t._m(0,!0),t._l(e,(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(r))]),a("td",[t._v(t._s(e.product_name))]),a("td",[t._v(t._s(e.customer_product_name))]),a("td",[t._v(t._s(e.tax_code))]),a("td",[t._v(t._s(e.invoice_product_name))]),a("td",[t._v(t._s(e.product_img))]),a("td",[t._v(t._s(e.specs_value))]),a("td",[t._v(t._s(e.color))]),a("td",[t._v(t._s(e.technical_param))]),a("td",[t._v(t._s(e.unit))]),a("td",[t._v(t._s(e.count))]),a("td",[t._v(t._s(e.no_tax_price))]),a("td",[t._v(t._s(e.no_tax_total_price))]),a("td",[t._v(t._s(e.tax_rate))]),a("td",[t._v(t._s(e.tax_amount))]),a("td",[t._v(t._s(e.tax_price))]),a("td",[t._v(t._s(e.tax_total_price))]),a("td",[t._v(t._s(e.remark))])])})),a("tr",[a("td",{attrs:{colspan:"18"}},[t._v("合计（元）:￥"+t._s(t.purchaseTotal(e,2)))])]),a("tr",[a("td",{attrs:{colspan:"18"}},[t._v("合计人民币金额大写："+t._s(t.dealBigMoney(t.purchaseTotal(e,2))))])])],2)])])])})),t._l(t.orderDetailArr,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"header"},[t.orderDetailArr.length<2?a("div",{staticClass:"name"},[t._v("生产订单产品信息")]):t._e(),t.orderDetailArr.length>=2?a("div",{staticClass:"name"},[t._v("生产订单"+t._s(r+1)+"产品信息")]):t._e()]),a("div",{staticClass:"details"},[a("table",{attrs:{border:"1",width:"100%"}},[a("tbody",[t._m(1,!0),t._l(e,(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(r))]),a("td",[t._v(t._s(e.matter_code))]),a("td",[t._v(t._s(e.product_name))]),a("td",[t._v(t._s(e.specs_value))]),a("td",[t._v(t._s(e.product_draw))]),a("td",[t._v(t._s(e.unit))]),a("td",[t._v(t._s(e.count))]),a("td",[t._v(t._s(e.explain))]),a("td",[t._v(t._s(e.requirement))]),a("td",[t._v(t._s(e.color))])])}))],2)])])])})),t._l(t.purchaseDetailArr,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"header"},[t.purchaseDetailArr.length<2?a("div",{staticClass:"name"},[t._v("采购合同产品信息")]):t._e(),t.purchaseDetailArr.length>=2?a("div",{staticClass:"name"},[t._v("采购合同"+t._s(r+1)+"产品信息")]):t._e()]),a("div",{staticClass:"details"},[a("table",{attrs:{border:"1",width:"100%"}},[a("tbody",[t._m(2,!0),t._l(e,(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(r))]),a("td",[t._v(t._s(e.product_name))]),a("td",[t._v(t._s(e.unit))]),a("td",[t._v(t._s(e.count))]),a("td",[t._v(t._s(e.price))]),a("td",[t._v(t._s(e.total_price))]),a("td",[t._v(t._s(e.remark))])])})),a("tr",[a("td",{attrs:{colspan:"7"}},[t._v("合计（元）:￥"+t._s(t.purchaseTotal(e,1)))])]),a("tr",[a("td",{attrs:{colspan:"7"}},[t._v("合计人民币金额大写："+t._s(t.dealBigMoney(t.purchaseTotal(e,1))))])])],2)])])])}))],2)])])]):t._e()},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("序号")]),a("th",[t._v("产品名称")]),a("th",[t._v("(客户)产品名称")]),a("th",[t._v("税码")]),a("th",[t._v("开票产品名称")]),a("th",[t._v("产品图片")]),a("th",[t._v("规格尺寸")]),a("th",[t._v("款式颜色")]),a("th",[t._v("技术参数")]),a("th",[t._v("单位")]),a("th",[t._v("数量")]),a("th",[t._v("不含税单价")]),a("th",[t._v("不含税总价")]),a("th",[t._v("税率")]),a("th",[t._v("税额")]),a("th",[t._v("含税单价")]),a("th",[t._v("含税总价")]),a("th",[t._v("备注")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("序号")]),a("th",[t._v("物料编码")]),a("th",[t._v("产品名称")]),a("th",[t._v("规格")]),a("th",[t._v("图号")]),a("th",[t._v("单位")]),a("th",[t._v("数量")]),a("th",[t._v("产品说明")]),a("th",[t._v("客户要求")]),a("th",[t._v("颜色")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("序号")]),a("th",[t._v("产品名称")]),a("th",[t._v("单位")]),a("th",[t._v("数量")]),a("th",[t._v("单价")]),a("th",[t._v("总价")]),a("th",[t._v("备注")])])}],o=(a("ac1f"),a("5319"),a("ade3")),s=(a("c530"),a("e349"),a("1fbf"),a("22ce")),n={name:"productDetail",data:function(){var t;return{checkDialog:!0,offer_guid:null,choose:!0,detailKey:{id:"id",offer_date:"报价日期",project_code:"项目编号",project_name:"项目名称",project_date:"项目创建时间",offer_guid:"报价单guid",offer_draw:"报价编号",offer_company:"报价单位",contacts_name:"报价人",contacts_phone:"报价人电话",contacts_email:"报价人邮箱",customer_company:"客户公司",customer_contacts:"联系人",customer_phone:"联系电话",customer_email:"邮箱",project_price:"项目总价"},contract:(t={id:"ID",contract_code:"销售合同编号",company:"供方公司名称",company_name:"供方单位名称",address:"供方工厂地址",legal_representative:"供方法定代表人",agent:"供方委托代理人",phone:"供方手机",telephone:"供方电话",fax:"供方传真",email:"供方电邮",bank:"供方开户银行",account:"供方账号",customer_company:"供方"},Object(o["a"])(t,"company","需方公司名称"),Object(o["a"])(t,"customer_company_name","需方单位名称"),Object(o["a"])(t,"customer_address","需方单位地址"),Object(o["a"])(t,"customer_legal_representative","需方法定代表人"),Object(o["a"])(t,"customer_agent","需方委托代理人"),Object(o["a"])(t,"customer_phone","需方手机"),Object(o["a"])(t,"customer_telephone","需方电话"),Object(o["a"])(t,"customer_fax","需方传真"),Object(o["a"])(t,"customer_email","需方电邮"),Object(o["a"])(t,"customer_bank","需方开户银行"),Object(o["a"])(t,"customer_account","需方账号"),Object(o["a"])(t,"contract_type","合同类型"),Object(o["a"])(t,"contract_status","合同状态"),Object(o["a"])(t,"project_code","项目编号"),Object(o["a"])(t,"project_name","项目名称"),Object(o["a"])(t,"sign_date","签订日期"),Object(o["a"])(t,"delivery_date","交货日期"),Object(o["a"])(t,"total_price","合同总金额"),Object(o["a"])(t,"advance_payment_rate","预付款比例"),Object(o["a"])(t,"invoice_flag","是否开票(1:是,2:否)"),Object(o["a"])(t,"contract_description","合同说明"),t),contractDetail:{id:1,sale_id:"销售合同ID",contract_code:"销售合同编号",product_name:"产品名称",customer_product_name:"客户产品名称",tax_code:"税码",invoice_product_name:"开票产品名称",product_img:"产品图片",specs_value:"规格",color:"颜色",technical_param:"技术参数",unit:"单位",count:"数量",no_tax_price:"不含税单价",no_tax_total_price:"不含税总单价",tax_rate:"税率",tax_amount:"税额",tax_price:"含税单价",tax_total_price:"含税总价",remark:"备注"},order:{id:"ID",order_id:"订单ID",order_code:"订单编号",order_name:"订单名称",order_date:"下单日期",contract_code:"销售合同编号",contacts_name:"销售员",contacts_phone:"电话",sign_date:"合同签订日期",sign_flag:"是否签订合同(1:是,0:否)",status:"订单状态",delivery_date:"计划交货日期",customer_no:"客户号",customer_company:"客户公司",project_code:"项目编号",project_name:"项目名称",total_count:"合计"},orderDetail:{id:1,order_code:"订单编号",matter_code:"物料编码",product_name:"产品名称",specs_x:"规格单位x",specs_y:"规格单位y",specs_z:"规格单位z",specs_type:"规格类型",specs_value:"规格",product_draw:"图号",unit:"单位",count:"数量",explain:"说明",requirementl:"客户要求",color:"颜色"},purchase:{id:1,contract_code:"销售合同编号",company:"供方公司名称",address:"供方公司地址",contacts:"供方联系人",phone:"供方联系电话",purchase_code:"采购合同编号",sign_date:"合同签订日期",total_price:"合计金额",account:"供方货款账号",bank_name:"供方开户行",account_name:"供方开户名称",explain:"合同说明",status:"采购状态(1:采购中,2:已入库)",project_code:"项目编号"},purchaseDetail:{id:1,purchase_id:"采购合同ID",purchase_code:"采购合同编号",product_name:"产品名称",unit:"单位",count:"数量",price:"单价",total_price:"总价",remark:"备注"},contractArr:[],contractDetailArr:[],orderArr:[],orderDetailArr:[],purchaseArr:[],purchaseDetailArr:[]}},props:["project_code"],methods:{close:function(){this.checkDialog=!1,this.$emit("closeDialog")},chooseInfo:function(){this.choose=!this.choose},getContractSale:function(){var t=this;return Object(s["b"])({url:"contract.sale/comparison",method:"post",data:{project_code:this.project_code}}).then((function(e){e.data.list.length?t.contractArr=e.data.list:t.contractArr=[[]],e.data.product_list.length?t.contractDetailArr=e.data.product_list:t.contractDetailArr=[[]],console.log(e,99979)}))},getOrder:function(){var t=this;return Object(s["b"])({url:"order/comparison",method:"post",data:{project_code:this.project_code}}).then((function(e){e.data.list.length?t.orderArr=e.data.list:t.orderArr=[[]];for(var a=0;a<t.orderArr.length;a++)console.log(t.orderArr[a],6663),1==t.orderArr[a].status?t.orderArr[a].status="制作中":2==t.orderArr[a].status?t.orderArr[a].status="收货中":t.orderArr[a].status="已收货",delete t.orderArr[a].contract_code,delete t.orderArr[a].order_id,delete t.orderArr[a].sign_date,delete t.orderArr[a].sign_flag,delete t.orderArr[a].create_time,delete t.orderArr[a].update_time,delete t.orderArr[a].delete_time;e.data.product_list.length?t.orderDetailArr=e.data.product_list:t.orderDetailArr=[[]]}))},getContractPurchase:function(){var t=this;return Object(s["b"])({url:"/contract.purchase/comparison",method:"post",data:{project_code:this.project_code}}).then((function(e){e.data.list.length?t.purchaseArr=e.data.list:t.purchaseArr=[[]],e.data.product_list.length?t.purchaseDetailArr=e.data.product_list:t.purchaseDetailArr=[[]]}))},purchaseTotal:function(t,e){for(var a=0,r=0;r<t.length;r++)a+=1==e?t[r].total_price-0:t[r].tax_total_price-0;return a},dealBigMoney:function(t){var e=["角","分"],a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],r=[["元","万","亿"],["","拾","佰","仟"]],c=t<0?"负":"";t=Math.abs(t);for(var o="",s=0;s<e.length;s++)o+=(a[Math.floor(10*t*Math.pow(10,s))%10]+e[s]).replace(/零./,"");o=o||"整",t=Math.floor(t);for(s=0;s<r[0].length&&t>0;s++){for(var n="",i=0;i<r[1].length&&t>0;i++)n=a[t%10]+r[1][i]+n,t=Math.floor(t/10);o=n.replace(/(零.)*零$/,"").replace(/^$/,"零")+r[0][s]+o}return c+o.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}},mounted:function(){this.getContractSale(),this.getOrder(),this.getContractPurchase()},watch:{checkDialog:function(){this.checkDialog}}},i=n,d=(a("82f2"),a("2877")),l=Object(d["a"])(i,r,c,!1,null,"64759100",null);e["default"]=l.exports},"82f2":function(t,e,a){"use strict";var r=a("0d82"),c=a.n(r);c.a},"9e97":function(t,e,a){"use strict";var r=a("083c"),c=a.n(r);c.a},b3c0:function(t,e,a){"use strict";a.r(e),a.d(e,"GetList",(function(){return c})),a.d(e,"AddObj",(function(){return o})),a.d(e,"UpdateObj",(function(){return s})),a.d(e,"DelObj",(function(){return n})),a.d(e,"GetCascadeData",(function(){return i}));var r=a("22ce");function c(t){return Object(r["b"])({url:"contract.sale/index",method:"post",data:{page:t.current,limit:t.size,customer_company:t.customer_company,contract_code:t.contract_code,contract_status:t.contract_status,project_code:t.project_code,contract_type:t.contract_type}}).then((function(e){console.log(e,200,e.data),e.data=e.data?e.data:{},e.data.current=t.current,e.data.size=t.size,e.data.total=e.count;var a=e.data;for(var r in a)delete a[r].create_time,delete a[r].update_time,delete a[r].delete_time;return e.data.records=a,console.log(e,300,e.data),e}))}function o(t){return Object(r["b"])({url:"contract.sale/add",method:"post",data:t})}function s(t){return Object(r["b"])({url:"contract.sale/edit",method:"post",data:t})}function n(t){return Object(r["b"])({url:"contract.sale/delete",method:"post",data:{id:t}})}function i(){return Object(r["b"])({url:"/select/cascadeData",method:"get"})}},b87a:function(t,e,a){"use strict";a.r(e),a.d(e,"crudOptions",(function(){return c}));var r=a("22ce"),c=function(t){return{rowHandle:{fixed:"right",width:360,custom:[{text:"产品信息",type:"success",size:"small",emit:"productDetail",disabled:function(){return!t.hasPermissions("contract.sale/detail")}},{text:"对比查看",type:"success",size:"small",emit:"comparison",disabled:function(){return!t.hasPermissions("contract.sale/comparison")}}],view:{show:!1},edit:{thin:!0,disabled:function(){return!t.hasPermissions("contract.sale/edit")}},remove:{thin:!0,disabled:function(){return!t.hasPermissions("contract.sale/delete")}}},pageOptions:{compact:!1},options:{height:"100%"},viewOptions:{componentType:"row"},formOptions:{defaultSpan:12},columns:[{title:"ID",key:"id",width:60,type:"text",form:{disabled:!0}},{title:"项目编号",key:"project_code",sortable:!0,type:"text",width:120,form:{disabled:!0}},{title:"所属项目",key:"project_code",width:200,search:{show:!0},type:"select",dict:{url:"/dicts/getProjectList",getData:function(t,e){return Object(r["b"])({url:"project/getProjectList",method:"post"}).then((function(t){for(var e=t.data,a=[{value:null,label:"请选择"}],r=0;r<e.length;r++)a.push({value:e[r].project_code,label:e[r].project_name});return a}))}}},{title:"销售合同编号",key:"contract_code",sortable:!0,type:"text",width:100,search:{show:!0}},{title:"供方公司名称",key:"company",type:"text"},{title:"供方单位名称",key:"company_name",type:"text"},{title:"供方工厂地址",key:"address",type:"text"},{title:"供方法定代表",key:"legal_representative",type:"text"},{title:"供方委托代理",key:"agent",type:"text"},{title:"供方手机",key:"phone",type:"text"},{title:"供方电话",key:"telephone",type:"text"},{title:"供方传真",key:"fax",type:"text"},{title:"供方电邮",key:"email",type:"text"},{title:"供方开户银行",key:"bank",type:"text"},{title:"供方账号",key:"account",type:"text"},{title:"需方公司名称",key:"customer_company",type:"text",search:{show:!0}},{title:"需方单位名称",key:"customer_company_name",type:"text"},{title:"需方单位地址",key:"customer_address",type:"text"},{title:"需方法定代表",key:"customer_legal_representative",type:"text"},{title:"需方委托代理",key:"customer_agent",type:"text"},{title:"需方手机",key:"customer_phone",type:"text"},{title:"需方电话",key:"customer_telephone",type:"text"},{title:"需方传真",key:"customer_fax",type:"text"},{title:"需方电邮",key:"customer_email",type:"text"},{title:"需方开户银行",key:"customer_bank",type:"text"},{title:"需方账号",key:"customer_account",type:"text"},{title:"合同类型",key:"contract_type",search:{show:!0},type:"select",dict:{data:[{value:1,label:"原始合同"},{value:2,label:"增补合同"}]},form:{disabled:!0}},{title:"合同状态",key:"contract_status",search:{show:!0},type:"select",dict:{data:[{value:1,label:"生效中"},{value:2,label:"已失效"},{value:2,label:"已完成"}]},form:{component:{value:1}}},{title:"签订日期",key:"sign_date",type:"datetime",width:150,form:{component:{props:{valueFormat:"yyyy-MM-dd HH-mm-ss"}}}},{title:"交货日期",key:"delivery_date",type:"datetime",width:150,form:{component:{props:{valueFormat:"yyyy-MM-dd HH-mm-ss"}}}},{title:"合同总金额",key:"total_price",type:"text"},{title:"预付款比例",key:"advance_payment_rate",type:"text"},{title:"合同说明",key:"contract_description",width:300,type:"text-area",showOverflowTooltip:!0,viewForm:{component:{name:null,render:function(t,e){return t("div",[e.value])}}}}]}}},c530:function(t,e,a){"use strict";a.r(e),a.d(e,"GetList",(function(){return c})),a.d(e,"AddObj",(function(){return o})),a.d(e,"UpdateObj",(function(){return s})),a.d(e,"DelObj",(function(){return n})),a.d(e,"GetCascadeData",(function(){return i}));var r=a("22ce");function c(t){return console.log(t,888),Object(r["b"])({url:"project.offer_product/index",method:"post",data:{page:t.current,limit:t.size,offer_guid:t.offer_guid}}).then((function(e){console.log(e,9999,e.data),e.data=e.data?e.data:{},e.data.current=t.current,e.data.size=t.size,e.data.total=e.count;var a=e.data;for(var r in a)delete a[r].requirementl,delete a[r].color,delete a[r].create_time,delete a[r].update_time,delete a[r].delete_time;return e.data.records=a,e}))}function o(t){return Object(r["b"])({url:"project/add",method:"post",data:t})}function s(t){return Object(r["b"])({url:"project/edit",method:"post",data:t})}function n(t){return Object(r["b"])({url:"project/delete",method:"post",data:{id:t}})}function i(){return Object(r["b"])({url:"/select/cascadeData",method:"get"})}},e349:function(t,e,a){"use strict";a.r(e),a.d(e,"crudOptions",(function(){return r}));var r=function(t){return{rowHandle:{fixed:"right"},pageOptions:{compact:!1},options:{height:"300px",highlightCurrentRow:!0,rowKey:"id"},viewOptions:{componentType:"row"},formOptions:{defaultSpan:12,appendToBody:!0},columns:[{title:"ID",key:"id",width:60,sortable:!0,form:{disabled:!0}},{title:"报价单guid",key:"offer_guid",sortable:!0,search:{show:!0},type:"text",width:150},{title:"物料编码",key:"matter_code",type:"text"},{title:"产品名称",key:"product_name",type:"text"},{title:"产品大类名称",key:"class_name",type:"text"},{title:"规格",key:"specs_value",type:"text",width:200},{title:"图号",key:"product_draw",type:"text"},{title:"开票名称",key:"billing_name",type:"text"},{title:"价格",key:"price",type:"text"},{title:"单位",key:"unit",type:"text"},{title:"数量",key:"count",type:"text"},{title:"简单描述",key:"explain",type:"text",width:400},{title:"复杂描述",key:"describe",type:"text",width:400},{title:"项目日期",key:"project_date",type:"datetime",form:{component:{props:{valueFormat:"yyyy-MM-dd HH-mm-ss"}}}}]}}},ef29:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d2-container",{class:{"page-compact":t.crud.pageOptions.compact}},[a("template",{slot:"header"},[t._v("销售合同")]),a("d2-crud-x",t._g(t._b({ref:"d2Crud",on:{productDetail:t.getProductDetail,comparison:t.getComparisonCheck}},"d2-crud-x",t._crudProps,!1),t._crudListeners),[a("div",{attrs:{slot:"header"},slot:"header"},[a("crud-search",{ref:"search",attrs:{options:t.crud.searchOptions},on:{submit:t.handleSearch}}),a("el-button-group",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"contract.sale/add",expression:"'contract.sale/add'"}],attrs:{size:"small",type:"primary"},on:{click:t.addSalesContract}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增")])],1),a("crud-toolbar",{attrs:{search:t.crud.searchOptions.show,compact:t.crud.pageOptions.compact,columns:t.crud.columns},on:{"update:search":function(e){return t.$set(t.crud.searchOptions,"show",e)},"update:compact":function(e){return t.$set(t.crud.pageOptions,"compact",e)},refresh:function(e){return t.doRefresh()},"columns-filter-changed":t.handleColumnsFilterChanged}})],1)]),t.checkShow?a("comparison-Check",{ref:"check",attrs:{project_code:t.project_code},on:{closeDialog:t.closeDialog}}):t._e()],2)},c=[],o=a("b3c0"),s=a("b87a"),n=a("1fbf"),i=a("56ca"),d=a("22ce"),l={name:"salesManagement-sales",mixins:[n["d2CrudPlus"].crud],components:{comparisonCheck:i["default"]},data:function(){return{dialogShow:!1,offer_guid:null,checkShow:!1,project_code:null}},methods:{getCrudOptions:function(){return Object(s["crudOptions"])(this)},pageRequest:function(t){return o["GetList"](t)},addRequest:function(t){return o["AddObj"](t)},updateRequest:function(t){return o["UpdateObj"](t)},delRequest:function(t){return o["DelObj"](t.id)},getProductDetail:function(t,e){t.index;var a=t.row;this.offer_guid=a.contract_code,this.$router.push({path:"/salesManagement/contractDetail",query:{offerGuid:a.contract_code,id:a.id}})},addSalesContract:function(){var t=this;return Object(d["b"])({url:"contract.sale/add",method:"post"}).then((function(e){t.$router.push({path:"/salesManagement/contractDetail",query:{id:e.data.id}})}))},getComparisonCheck:function(t,e){var a=this,r=(t.index,t.row);this.checkShow=!0,this.project_code=r.project_code,this.$nextTick((function(){a.$refs.check.checkDialog=!0}))},closeDialog:function(){this.checkShow=!1},closeProductDetail:function(){this.dialogShow=!1}}},u=l,_=(a("9e97"),a("2877")),p=Object(_["a"])(u,r,c,!1,null,null,null);e["default"]=p.exports}}]);