(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83f42b58","chunk-2d0dd5de"],{"4b54":function(t,e,a){},"80a1":function(t,e,a){t.exports=a.p+"img/logo.342516ba.png"},a72e:function(t,e,a){"use strict";var s=a("4b54"),n=a.n(s);n.a},dd6b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("d2-container",[s("div",{staticClass:"contractDetail"},[s("table",{attrs:{border:"2"}},[s("tr",[s("th",{staticClass:"h",attrs:{colspan:"19"}},[s("div",{staticClass:"header"},[s("img",{attrs:{src:a("80a1"),alt:""}}),s("h1",[t._v("常州浩东净化承揽加工合同")])])])]),s("tr",[s("td",{staticClass:"g tr",attrs:{colspan:"2"}},[t._v("项目名称：")]),s("td",{attrs:{colspan:"10"}},[s("el-select",{staticClass:"project",attrs:{placeholder:"请选择项目","popper-class":"project"},model:{value:t.row.project_code,callback:function(e){t.$set(t.row,"project_code",e)},expression:"row.project_code"}},t._l(t.projectList,(function(e,a){return s("el-option",{key:a,attrs:{label:e.project_name,value:e.project_code},nativeOn:{click:function(a){return t.selectProject(e.project_name,e.project_code)}}})})),1)],1),s("td",{staticClass:"g tr",attrs:{colspan:"2"}},[t._v("合同编号：")]),s("td",{attrs:{colspan:"5"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus||t.contractCodeDisabled},on:{change:t.changeEdmit,blur:t.changeContractCode},model:{value:t.row.contract_code,callback:function(e){t.$set(t.row,"contract_code",e)},expression:"row.contract_code"}})],1)]),s("tr",[s("td",{staticClass:"g tr",attrs:{colspan:"2"}},[t._v("供方：")]),s("td",{attrs:{colspan:"10"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.company_name,callback:function(e){t.$set(t.row,"company_name",e)},expression:"row.company_name"}})],1),s("td",{staticClass:"g tr",attrs:{colspan:"2"}},[t._v("签订日期：")]),s("td",{attrs:{colspan:"5"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.sign_date,callback:function(e){t.$set(t.row,"sign_date",e)},expression:"row.sign_date"}})],1)]),s("tr",[s("td",{staticClass:"g tr",attrs:{colspan:"2"}},[t._v("需方：")]),s("td",{attrs:{colspan:"10"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_company_name,callback:function(e){t.$set(t.row,"customer_company_name",e)},expression:"row.customer_company_name"}})],1),s("td",{staticClass:"g tr",attrs:{colspan:"2"}},[t._v("交货日期：")]),s("td",{attrs:{colspan:"5"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.delivery_date,callback:function(e){t.$set(t.row,"delivery_date",e)},expression:"row.delivery_date"}})],1)]),s("tr",[s("th",[t._v("序号")]),s("th",[t._v("产品名称")]),s("th",[t._v("(客户) 产品名称")]),s("th",[t._v("税码")]),s("th",[t._v("开票产品名称")]),s("th",[t._v("产品图片")]),s("th",[t._v("规格尺寸")]),s("th",[t._v("款式颜色")]),s("th",[t._v("技术参数")]),s("th",[t._v("单位")]),s("th",[t._v("数量")]),s("th",[t._v("不含税单价")]),s("th",[t._v("不含税总价")]),s("th",[t._v("税率")]),s("th",[t._v("税额")]),s("th",[t._v("含税单价")]),s("th",[t._v("含税总价")]),s("th",[t._v("备注")]),s("th",[s("div",{staticClass:"addProduct",on:{click:t.addProduct}},[t._v("新增")])])]),t._l(t.contractArr,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"g tc"},[t._v(t._s(a+1))]),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.product_name,callback:function(a){t.$set(e,"product_name",a)},expression:"info.product_name"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.customer_product_name,callback:function(a){t.$set(e,"customer_product_name",a)},expression:"info.customer_product_name"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.tax_code,callback:function(a){t.$set(e,"tax_code",a)},expression:"info.tax_code"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.invoice_product_name,callback:function(a){t.$set(e,"invoice_product_name",a)},expression:"info.invoice_product_name"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.product_img,callback:function(a){t.$set(e,"product_img",a)},expression:"info.product_img"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.specs_value,callback:function(a){t.$set(e,"specs_value",a)},expression:"info.specs_value"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.color,callback:function(a){t.$set(e,"color",a)},expression:"info.color"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.technical_param,callback:function(a){t.$set(e,"technical_param",a)},expression:"info.technical_param"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"info.unit"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.count,callback:function(a){t.$set(e,"count",a)},expression:"info.count"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.no_tax_price,callback:function(a){t.$set(e,"no_tax_price",a)},expression:"info.no_tax_price"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.no_tax_total_price,callback:function(a){t.$set(e,"no_tax_total_price",a)},expression:"info.no_tax_total_price"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.tax_rate,callback:function(a){t.$set(e,"tax_rate",a)},expression:"info.tax_rate"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.tax_amount,callback:function(a){t.$set(e,"tax_amount",a)},expression:"info.tax_amount"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.tax_price,callback:function(a){t.$set(e,"tax_price",a)},expression:"info.tax_price"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.tax_total_price,callback:function(a){t.$set(e,"tax_total_price",a)},expression:"info.tax_total_price"}})],1),s("td",[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:function(a){return t.edmit(e)}},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"info.remark"}})],1),s("td",[s("div",{staticClass:"addProduct delete",on:{click:function(a){return t.deleteProduct(e)}}},[t._v("删除")])])])})),s("tr",[s("td",{staticClass:"g tr",attrs:{colspan:"2"}},[t._v("金额：")]),s("td",{attrs:{colspan:"13"}},[t._v(t._s(t.amount))]),s("td",{staticClass:"g tr",attrs:{colspan:"1"}},[t._v("合计：")]),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.total))])]),s("tr",[s("td",{staticClass:"g",attrs:{colspan:"19"}},[t._v("合同说明：")])]),s("tr",[s("td",{attrs:{colspan:"19"}},[s("el-input",{attrs:{type:"textarea",cols:"30",rows:"10",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.contract_description,callback:function(e){t.$set(t.row,"contract_description",e)},expression:"row.contract_description"}})],1)]),s("tr",[s("td",{staticClass:"tc",attrs:{colspan:"10"}},[t._v("供方信息:")]),s("td",{staticClass:"tc",attrs:{colspan:"9"}},[t._v("需方信息:")])]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("单位名称(章)∶")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.company_name,callback:function(e){t.$set(t.row,"company_name",e)},expression:"row.company_name"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("单位名称(章)∶")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_company_name,callback:function(e){t.$set(t.row,"customer_company_name",e)},expression:"row.customer_company_name"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("工厂地址:")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.address,callback:function(e){t.$set(t.row,"address",e)},expression:"row.address"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("单位地址∶")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_address,callback:function(e){t.$set(t.row,"customer_address",e)},expression:"row.customer_address"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("法定代表人:")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.legal_representative,callback:function(e){t.$set(t.row,"legal_representative",e)},expression:"row.legal_representative"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("法定代表人:")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_legal_representative,callback:function(e){t.$set(t.row,"customer_legal_representative",e)},expression:"row.customer_legal_representative"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("委托代理人(签章):")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.agent,callback:function(e){t.$set(t.row,"agent",e)},expression:"row.agent"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("委托代理人(签章):")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_agent,callback:function(e){t.$set(t.row,"customer_agent",e)},expression:"row.customer_agent"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("手机:")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.phone,callback:function(e){t.$set(t.row,"phone",e)},expression:"row.phone"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("手机:")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_phone,callback:function(e){t.$set(t.row,"customer_phone",e)},expression:"row.customer_phone"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("电话:")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.telephone,callback:function(e){t.$set(t.row,"telephone",e)},expression:"row.telephone"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("电话:")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_telephone,callback:function(e){t.$set(t.row,"customer_telephone",e)},expression:"row.customer_telephone"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("传真:")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.fax,callback:function(e){t.$set(t.row,"fax",e)},expression:"row.fax"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("传真:")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_fax,callback:function(e){t.$set(t.row,"customer_fax",e)},expression:"row.customer_fax"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("电邮:")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.email,callback:function(e){t.$set(t.row,"email",e)},expression:"row.email"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("电邮:")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_email,callback:function(e){t.$set(t.row,"customer_email",e)},expression:"row.customer_email"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("开户银行:")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.bank,callback:function(e){t.$set(t.row,"bank",e)},expression:"row.bank"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("开户银行:")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_bank,callback:function(e){t.$set(t.row,"customer_bank",e)},expression:"row.customer_bank"}})],1)]),s("tr",[s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("帐号:")]),s("td",{attrs:{colspan:"8"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.account,callback:function(e){t.$set(t.row,"account",e)},expression:"row.account"}})],1),s("td",{staticClass:"tr",attrs:{colspan:"2"}},[t._v("帐号:")]),s("td",{attrs:{colspan:"7"}},[s("el-input",{attrs:{type:"text",disabled:t.enterStatus},on:{change:t.changeEdmit},model:{value:t.row.customer_account,callback:function(e){t.$set(t.row,"customer_account",e)},expression:"row.customer_account"}})],1)])],2)])])},n=[],o=a("22ce"),c={name:"salesManagement-contractDetail",data:function(){return{projectList:[],projectName:"",productDialog:!0,order_code:null,contractArr:[],row:{id:0,contract_code:"",company:"",company_name:"",address:"",legal_representative:"",agent:"",phone:"",telephone:"",fax:"",email:"",bank:"",account:"",customer_company:"",customer_company_name:"",customer_address:"",customer_legal_representative:"",customer_agent:"",customer_phone:"",customer_telephone:"",customer_fax:"",customer_email:"",customer_bank:"",customer_account:"",contract_type:2,contract_status:1,project_code:"",project_name:"",sign_date:"",delivery_date:"",total_price:"",advance_payment_rate:"",invoice_flag:1,contract_description:""},amount:null,total:null,enterStatus:!0,contractStatus:"add",contractCodeDisabled:!1}},created:function(){console.log(this.$route.query,66610)},methods:{getList:function(){var t=this;return Object(o["b"])({url:"contract.sale_product/index",method:"post",data:{sale_id:this.row.id}}).then((function(e){var a=e.data;for(var s in t.amount=0,t.total=0,a)t.amount=t.amount+(a[s].tax_total_price-0),t.total=t.total+(a[s].count-0),delete a[s].matter_code,delete a[s].specs_x,delete a[s].specs_y,delete a[s].specs_z,delete a[s].specs_type,delete a[s].product_draw,delete a[s].explain,delete a[s].requirementl,delete a[s].create_time,delete a[s].update_time,delete a[s].delete_time;t.row.total_price!=t.amount&&(t.row.total_price=t.amount,t.changeEdmit()),t.contractArr=a}))},addProduct:function(){var t=this;if(console.log(this.$route.query.offerGuid,this.row.contract_code),this.row.contract_code)return Object(o["b"])({url:"contract.sale_product/add",method:"post",data:{sale_id:this.row.id}}).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})}));this.$message({message:"请先输入合同编号",type:"error"})},deleteProduct:function(t){var e=this;return Object(o["b"])({url:"contract.sale_product/delete",method:"post",data:t}).then((function(t){e.getList(),e.$message({message:t.msg,type:"success"})}))},edmit:function(t){var e=this;return t.sale_id=this.row.id,Object(o["b"])({url:"contract.sale_product/edit",method:"post",data:t}).then((function(t){e.getList(),e.$message({message:t.msg,type:"success"})}))},contractEdit:function(t,e){var a=this;return t&&(this.row.project_name=t),e&&(this.row.project_code=e),Object(o["b"])({url:"contract.sale/edit",method:"post",data:this.row}).then((function(t){a.$message({message:t.msg,type:"success"})}))},contractAdd:function(t,e){var a=this;return Object(o["b"])({url:"contract.sale/add",method:"post",data:this.row}).then((function(t){a.row=t.data,a.enterStatus=!1,a.contractStatus="edit",a.$message({message:t.msg,type:"success"})})).catch((function(t){a.row.project_code="",a.enterStatus=!0,a.contractStatus="add",a.$message({message:t.msg,type:"error"})}))},changeEdmit:function(){"edit"==this.contractStatus?this.contractEdit():"add"==this.contractStatus&&this.contractAdd()},changeContractCode:function(){this.row.contract_code&&(this.contractCodeDisabled=!0)},close:function(){this.productDialog=!1,this.$emit("closeProductDetail")},getProjectList:function(t){var e=this;return Object(o["b"])({url:"project/getProjectList",method:"post",data:{kw:t}}).then((function(t){e.projectList=t.data,console.log("项目列表",t.data)}))},selectProject:function(t,e){"edit"==this.contractStatus?this.contractEdit(t,e):"add"==this.contractStatus&&this.contractAdd(t,e),console.log("选中",t,e)}},mounted:function(){this.$route.query.add||(this.row=JSON.parse(this.$route.query.info),this.row.contract_code&&this.getList(),this.enterStatus=!1,this.contractStatus="edit"),this.getProjectList()},watch:{}},r=c,l=(a("a72e"),a("2877")),i=Object(l["a"])(r,s,n,!1,null,"06e9abe1",null);e["default"]=i.exports}}]);